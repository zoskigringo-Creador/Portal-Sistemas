<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Sistemas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos para el scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d3748; /* gris oscuro-azulado */
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568; /* gris un poco más claro */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gris claro al pasar el mouse */
        }

        /* Transición suave para el menú */
        #sidebar {
            transition: transform 0.3s ease-in-out;
        }
        /* Overlay para cerrar el menú al hacer clic fuera */
        #sidebar-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        
        /* Estilo para el botón de menú activo (resaltado) */
        .menu-item.active {
            background-color: #2563eb; /* Azul brillante */
            color: white;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-200" style="font-family: 'Inter', sans-serif;">

    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden" onclick="toggleMenu()"></div>

    <button id="menu-btn" onclick="toggleMenu()" class="fixed top-4 left-4 z-20 bg-white text-gray-800 p-3 rounded-full shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>

    <aside id="sidebar" class="w-72 bg-gray-800 text-white flex flex-col p-4 fixed top-0 left-0 h-full z-40 transform -translate-x-full shadow-lg">

        <div class="flex justify-between items-center mb-6 border-b border-gray-700 pb-4">
            <h2 class="text-2xl font-bold">Sistemas</h2>
            <button onclick="toggleMenu()" class="text-2xl p-2 text-gray-400 hover:text-white">&times;</button>
        </div>

        <nav class="flex-grow overflow-y-auto">
            <ul>
                <li><button data-src="sistema_de_inventario.html" data-title="Inventario General" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Sistema de Inventario (General)</button></li>
                <li><button data-src="inventario_kcc.html" data-title="Inventario KCC" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Inventario KCC</button></li>
                <li><button data-src="inventario_tmk.html" data-title="Inventario TMK" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Inventario TMK</button></li>
                <li><button data-src="salida_de_camiones.html" data-title="Salida de Camiones" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Salida de Camiones</button></li>
                <li><button data-src="inspecciones_moviles.html" data-title="Inspección de Móviles" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Inspección de Móviles</button></li>
                <li><button data-src="carga_de_metros_cubicos.html" data-title="Carga de M3" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Carga de Metros Cúbicos</button></li>
                <li><button data-src="ordenar_snc_biggie.html" data-title="SNC Biggie" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Ordenar SNC Biggie</button></li>
                <li><button data-src="snc_pendientes.html" data-title="SNC Pendientes" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">SNC Pendientes</button></li>
            </ul>
        </nav>

        <footer class="mt-4 border-t border-gray-700 pt-4">
            <p class="text-sm text-gray-500 text-center">&copy; 2024 - Rodrigo Cabrera</p>
        </footer>
    </aside>

    <main class="h-screen"> 
        <iframe id="content-frame" class="w-full h-full border-0" src=""></iframe>
    </main>

    <script>
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const contentFrame = document.getElementById('content-frame');
        // const appTitle = document.getElementById('app-title'); // Ya no existe
        const menuItems = document.querySelectorAll('.menu-item');
        let currentItem = null; // Para guardar el ítem activo

        // Función para abrir/cerrar el menú
        function toggleMenu() {
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }

        // Función para cargar contenido
        function loadContent(src, title, buttonEl) {
            if (src) {
                try {
                    contentFrame.src = decodeURIComponent(src);
                } catch (e) {
                    console.error("Error al decodificar la URL:", e);
                    contentFrame.src = src; // Intentar cargarlo de todos modos
                }
                
                // Quitado: appTitle.textContent = title;

                // Resalta el ítem activo
                if (currentItem) {
                    currentItem.classList.remove('active'); // Quita la clase 'active'
                }
                buttonEl.classList.add('active'); // Añade la clase 'active'
                currentItem = buttonEl;

                // Cierra el menú
                toggleMenu();
            }
        }

        // Asignar evento a cada ítem del menú
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                const src = item.getAttribute('data-src');
                const title = item.getAttribute('data-title');
                loadContent(src, title, item);
            });
        });

        // Cargar el primer sistema por defecto
        document.addEventListener('DOMContentLoaded', () => {
            // Ya no se hace nada al cargar, el iframe estará vacío
            // hasta que el usuario haga clic.
        });
    </script>
</body>
</html>