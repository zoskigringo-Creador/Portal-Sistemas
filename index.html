<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Sistemas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos para el scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d3748; /* gris oscuro-azulado */
        }
        ::-webkit-scrollbar-thumb {
            background: #4a5568; /* gris un poco m치s claro */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gris claro al pasar el mouse */
        }

        /* Transici칩n suave para el men칰 */
        #sidebar {
            transition: transform 0.3s ease-in-out;
        }
        /* Overlay para cerrar el men칰 al hacer clic fuera */
        #sidebar-overlay {
            transition: opacity 0.3s ease-in-out;
        }
        
        /* Estilo para el bot칩n de men칰 activo (resaltado) */
        .menu-item.active {
            background-color: #2563eb; /* Azul brillante */
            color: white;
            font-weight: 600;
        }

        /* --- (NUEVO) Animaci칩n de Saludo --- */
        @keyframes wave {
            0%, 60%, 100% { transform: rotate(0deg); }
            10%, 30% { transform: rotate(14deg); }
            20%, 40% { transform: rotate(-8deg); }
            50% { transform: rotate(10deg); }
        }
        .wave-animation {
            animation: wave 2.5s infinite;
            transform-origin: 70% 70%;
            display: inline-block;
        }
        /* --- Fin de la Animaci칩n --- */

    </style>
</head>
<body class="bg-gray-200" style="font-family: 'Inter', sans-serif;">

    <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden" onclick="toggleMenu()"></div>

    <button id="menu-btn" onclick="toggleMenu()" class="fixed top-4 left-4 z-20 bg-white text-gray-800 p-3 rounded-full shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>

    <aside id="sidebar" class="w-72 bg-gray-800 text-white flex flex-col p-4 fixed top-0 left-0 h-full z-40 transform -translate-x-full shadow-lg">

        <div class="flex justify-between items-center mb-6 border-b border-gray-700 pb-4">
            <h2 class="text-2xl font-bold">Sistemas</h2>
            <button onclick="toggleMenu()" class="text-2xl p-2 text-gray-400 hover:text-white">&times;</button>
        </div>

        <nav class="flex-grow overflow-y-auto">
            <ul>
                <!-- (NUEVO) Bot칩n de Men칰 Principal -->
                <li><button id="home-btn" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none font-bold border-b border-gray-700 mb-2">Men칰 Principal</button></li>
                
                <!-- Links existentes -->
                <li><button data-src="sistema_de_inventario.html" data-title="Inventario General" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Sistema de Inventario (General)</button></li>
                <li><button data-src="inventario_kcc.html" data-title="Inventario KCC" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Inventario KCC</button></li>
                <li><button data-src="inventario_tmk.html" data-title="Inventario TMK" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Inventario TMK</button></li>
                <li><button data-src="salida_de_camiones.html" data-title="Salida de Camiones" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Salida de Camiones</button></li>
                <li><button data-src="inspecciones_moviles.html" data-title="Inspecci칩n de M칩viles" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Inspecci칩n de M칩viles</button></li>
                <li><button data-src="carga_de_metros_cubicos.html" data-title="Carga de M3" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Carga de Metros C칰bicos</button></li>
                <li><button data-src="ordenar_snc_biggie.html" data-title="SNC Biggie" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Ordenar SNC Biggie</button></li>
                <li><button data-src="snc_pendientes.html" data-title="SNC Pendientes" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">SNC Pendientes</button></li>
                <!-- (NUEVO) Agregado para el link faltante -->
                <li><button data-src="calculadora_aguinaldo.html" data-title="Calculadora Aguinaldo" class="menu-item w-full text-left p-3 rounded-md hover:bg-gray-700 focus:outline-none">Calculadora Aguinaldo</button></li>

            </ul>
        </nav>

        <footer class="mt-4 border-t border-gray-700 pt-4">
            <p class="text-sm text-gray-500 text-center">&copy; 2024 - Rodrigo Cabrera</p>
        </footer>
    </aside>

    <main class="h-screen"> 
        
        <!-- (NUEVO) Pantalla de Bienvenida -->
        <div id="welcome-screen" class="flex flex-col items-center justify-center h-full bg-gray-200 p-8 text-center">
            <div class="text-7xl mb-6">
                <span class="wave-animation">游녦</span>
            </div>
            <h1 class="text-4xl font-bold text-gray-800 mb-4">춰Bienvenido, Rodrigo!</h1>
            <p class="text-xl text-gray-600">Selecciona una aplicaci칩n del men칰 para comenzar.</p>
        </div>

        <!-- (MODIFICADO) Iframe ahora est치 oculto por defecto -->
        <iframe id="content-frame" class="w-full h-full border-0 hidden" src=""></iframe>
    </main>

    <script>
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const contentFrame = document.getElementById('content-frame');
        const menuItems = document.querySelectorAll('.menu-item');
        
        // --- (NUEVO) Elementos ---
        const welcomeScreen = document.getElementById('welcome-screen');
        const homeBtn = document.getElementById('home-btn');
        // --- Fin ---
        
        let currentItem = null; // Para guardar el 칤tem activo

        // Funci칩n para abrir/cerrar el men칰
        function toggleMenu() {
            sidebar.classList.toggle('-translate-x-full');
            overlay.classList.toggle('hidden');
        }

        // (MODIFICADO) Funci칩n para cargar contenido
        function loadContent(src, title, buttonEl) {
            if (src) {
                
                // (NUEVO) Oculta la bienvenida y muestra el iframe
                welcomeScreen.classList.add('hidden');
                contentFrame.classList.remove('hidden');
                
                try {
                    contentFrame.src = decodeURIComponent(src);
                } catch (e) {
                    console.error("Error al decodificar la URL:", e);
                    contentFrame.src = src; // Intentar cargarlo de todos modos
                }
                
                // Resalta el 칤tem activo
                if (currentItem) {
                    currentItem.classList.remove('active'); // Quita la clase 'active'
                }
                
                // (NUEVO) El bot칩n "Menu Principal" no debe quedar activo
                if (buttonEl !== homeBtn) {
                    buttonEl.classList.add('active'); // A침ade la clase 'active'
                    currentItem = buttonEl;
                } else {
                    currentItem = null;
                }

                // Cierra el men칰
                toggleMenu();
            }
        }
        
        // (NUEVO) Funci칩n para volver al inicio
        function goHome() {
            welcomeScreen.classList.remove('hidden');
            contentFrame.classList.add('hidden');
            contentFrame.src = ""; // Limpia el iframe

            // Quita la selecci칩n de cualquier 칤tem
            if (currentItem) {
                currentItem.classList.remove('active');
            }
            currentItem = null;
            
            toggleMenu();
        }

        // Asignar evento a cada 칤tem del men칰
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                // (NUEVO) No recargar si es el bot칩n de inicio
                if (item.id === 'home-btn') {
                    goHome();
                } else {
                    const src = item.getAttribute('data-src');
                    const title = item.getAttribute('data-title');
                    loadContent(src, title, item);
                }
            });
        });

        // (MODIFICADO) Ya no se carga nada al inicio
        document.addEventListener('DOMContentLoaded', () => {
            // La pantalla de bienvenida se muestra por defecto
        });
    </script>
</body>
</html>
